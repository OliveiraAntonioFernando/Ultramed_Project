{% extends 'base.html' %}
{% block content %}
<div class="bg-gray-50 min-h-screen">
    <nav class="bg-marsala-700 p-6 shadow-lg text-white flex justify-between items-center sticky top-0 z-50" style="background-color: #700c15;">
        <h2 class="text-xl font-black uppercase italic tracking-tighter">
            Consult√≥rio | <span class="font-light opacity-80">Fila de Atendimento</span>
        </h2>
        <div class="flex items-center gap-4">
            <span class="text-[10px] font-black bg-white/20 px-4 py-2 rounded-full uppercase italic tracking-widest">
                Dr(a). {{ request.user.username }}
            </span>
            <a href="{% url 'sistema_interno:logout' %}" class="bg-white text-marsala-700 w-10 h-10 flex items-center justify-center rounded-full shadow-lg hover:bg-marsala-100 transition-all">
                <i class="fas fa-power-off text-sm"></i>
            </a>
        </div>
    </nav>

    <div class="p-8 max-w-5xl mx-auto text-left">
        <div class="mb-8 flex justify-between items-end">
            <div>
                <h3 class="text-xs font-black uppercase text-gray-400 tracking-widest ml-2">Sala de Espera</h3>
                <p class="text-[10px] font-bold text-marsala-700 uppercase ml-2 italic">Pacientes com check-in realizado hoje</p>
            </div>
            <div class="text-right">
                <span class="text-4xl font-black text-marsala-700 leading-none">{{ pacientes_espera.count }}</span>
                <p class="text-[9px] font-black text-gray-400 uppercase">Aguardando</p>
            </div>
        </div>

        <div class="bg-white rounded-[2.5rem] shadow-sm border border-gray-100 overflow-hidden">
            <div class="divide-y divide-gray-50">
                {% for ag in pacientes_espera %}
                <div class="p-6 flex justify-between items-center hover:bg-marsala-50/30 transition-all group">
                    <div class="flex items-center gap-6">
                        <div class="w-16 h-16 {% if ag.tipo == 'EXAME' %}bg-blue-100 text-blue-600{% else %}bg-marsala-100 text-marsala-700{% endif %} rounded-[1.5rem] flex flex-col items-center justify-center transition-transform group-hover:scale-110">
                            <span class="text-xs font-black leading-none">{{ ag.hora|time:"H:i" }}</span>
                            <i class="fas {% if ag.tipo == 'EXAME' %}fa-stethoscope{% else %}fa-user-md{% endif %} text-sm mt-1"></i>
                        </div>
                        
                        <div>
                            <p class="text-base font-black text-gray-800 uppercase italic leading-none">{{ ag.paciente.nome_completo }}</p>
                            <div class="flex items-center gap-2 mt-2">
                                <span class="text-[9px] font-black px-2 py-0.5 rounded bg-gray-100 text-gray-500 uppercase">{{ ag.get_tipo_display }}</span>
                                <span class="text-[9px] font-black text-marsala-600 uppercase italic">
                                    {% if ag.paciente.plano %}{{ ag.paciente.plano.nome }}{% else %}Particular{% endif %}
                                </span>
                            </div>
                            {% if ag.observacoes %}
                            <p class="text-[10px] text-emerald-600 font-bold mt-1 uppercase tracking-tighter">
                                <i class="fas fa-info-circle mr-1"></i> {{ ag.observacoes }}
                            </p>
                            {% endif %}
                        </div>
                    </div>

                    <div class="flex items-center gap-3">
                        <a href="{% url 'sistema_interno:prontuario_view' ag.paciente.id %}" class="bg-marsala-700 text-white px-8 py-4 rounded-2xl text-[10px] font-black uppercase italic shadow-lg hover:bg-marsala-800 transition-all no-underline">
                            Chamar Paciente
                        </a>
                    </div>
                </div>
                {% empty %}
                <div class="p-20 text-center flex flex-col items-center">
                    <div class="w-20 h-20 bg-gray-50 rounded-full flex items-center justify-center mb-4">
                        <i class="fas fa-coffee text-2xl text-gray-200"></i>
                    </div>
                    <p class="text-gray-300 font-black uppercase italic text-xs tracking-widest">Nenhum paciente aguardando no momento.</p>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}